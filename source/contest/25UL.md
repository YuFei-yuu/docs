# 25赛季联盟赛血泪教训
## 整体策略
在25赛季的规则下，哨兵的重要性非常之大，第一优先级一定是调高机动性尽快把中心增益点站住，其次才是提供火力支援。以下一切调车思路都建立在这个前提下。

## 建图
今年联盟赛依旧没有单独给导航建图的时间，只有适应性训练打完后才有几分钟扫图。今年是跟西南交打的适应性，两边导航提前商量好了一起逆时针绕圈所以建出了个很完美的图（虽然其实还是很难用，具体见重定位），所以和适应性训练对手商量好真的很重要。
<img src="./pic/map.png" style="width:60%;">

以及一定要准备万一建不出图的备用方案（`sentry_bringup/bringup_for_RMUL.launch.py`），边建图边导航，应急用。

以及建图时 **<font color="red">一定要录bag！一定要录bag！一定要录bag！！！</font>**

## 重定位
联盟赛上能用做定位的有效点太少了，整体地图也比较小，场外人又非常多，icp的要求又非常严格，所以真的很难定到位。前几场没敢直接开重定位，录了bag回家果然蓝方一场都没定到，红方看运气，难蚌。

直接手摆其实还是有些风险，但没定到位启动不了更加致命，及时开不建图方案，来不及了一定 **<font color="blue">善用技术暂停</font>**

## 调车思路
依旧是所有策略建立在让哨兵站稳点的前提下<BR>
1.拉高速度抢点<BR>
最后提到了std0.47 max0.9，五秒到点
<img src="./pic/5s.jpg" style="width:60%;">

 **<font color="red">2.动态避障**</font><BR>
这个是真没经验思路错了，调动态避障会导致点里有其他车的时候哨兵直接一个躲出去了，去抢到了点但直接自己给点让出去了，真的绷不住<BR>
最后一场local_costmap里cost_scaling_factor降到了2.0，但感觉其实还是不太够，直接开碰碰车往上撞就行了，应该需要再改一改cost_scaling_factor和inflation_radius。

## 决策
开局关小陀螺提速度冲出去抢点，调整标点位置想办法让他规划出来一条最近的路径越快越好，到点了再开。

西南站强度不大，开小陀螺+平移不好瞄，但只开小陀螺都没什么人瞄的到，不是打自瞄好的强队没必要标两点间巡逻，避免动的过程中冲出去。

回来之后想到了一种测点标的准不准的办法，可以找一块很空旷的场地开不建图导航跑决策，到点了之后关停，量一下此时距离起始点的xy方向距离，对应到比赛场地上有没有在点里，应该能减小点标歪的概率。（还是想骂联盟赛地标是真少吧就是盲标啊，服了）

又想到了一种标点方法，把场上建出来的图和官方提供的俯视图叠起来调一下透明度，把栅格地图里增益点的位置标称灰色，然后再用这个带灰色点位的地图启动navigation，标点就可以在灰色块里标了

~~这么想来解决办法还是挺多的，不知道备赛的时候干什么去了，真服了~~

## 场上
快启动指令必须要写，工具箱要准备可以挂着不需要用手提的，避免出意外备好三个充电宝两个有线HDMI两个屏幕电源线一个小键盘两套转接口，无线HDMI可以提前插上电对码，万一有线寄了及时换，对于各种决策都要准备两点巡逻和定点不动两套决策，场间三分钟换决策树路径其实是来得及的。

第一局需要搬车，HDMI先插车上，后面几局可以直接抱着箱子进去，HDMI先插屏上。局间赶紧把车开回来检查电池，要换就赶紧先换电池在干别的（小电脑重启很慢）。

## 待开发
回来总结会上提出了一个，可以做一个和电控通信，如果增益点现在在对方那里，那就先导航到一个可以打到人的地方先打，增益点不在对面了再导航去抢点。

但其实这个功能我个人有个疑虑就是会不会来不及这种，如果本来就在点里，打掉对面之后点直接移交，万一打掉了还没走到对面就又来一个跟上的（）更何况还有队友

emmmm看情况吧，做一下也不是很难实现，具体用不用还要取决于对手和自瞄

而且我们5s到点能站稳就根本没必要考虑这种情况了

所以最高优先级还是抢到了点却站不稳的问题，唉